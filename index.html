<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Generate a Random Password - RandomKeyMaker</title>
    <link rel="shortcut icon" href="images/FAV.png" type="image/x-icon">
    <audio id="shakeSound" src="./images/shake.wav" preload="auto"></audio>
    <audio id="generateSound" src="./images/generate.wav" preload="auto"></audio>
    <audio id="copySound" src="./images/copy.wav" preload="auto"></audio>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="logo" onclick="reloadPage()">
            <img src="images/FAV.png" alt="Logo">
            <h2 onclick="reloadPage()">RandomKeyMaker</h2>
        </div>
    </header>

    <!-- Main Content -->
    <main class="content">
        <div class="container">
            <div class="title">
                <h1>Generate a Random <span class="span">Password</span></h1>
            </div>

            <div class="bar">
                <input class="boxbar" type="text" placeholder="Password" id="password">
                <button onclick="copyPassword()"> Copy </button>
            </div>

            <div class="slider">
                <label for="password-length">Password Length:<span id="length-display">4</span></label>
                <input class="password-length" id="password-length" type="range" min="4" max="50" value="4">
            </div>

            <div class="options">
                <label class="characters">Characters:</label>
                <input type="checkbox" id="uppercase">
                <label for="uppercase">UpperCase</label>
                <input type="checkbox" id="Lowercase">
                <label for="Lowercase">LowerCase</label>
                <input type="checkbox" id="Numbers">
                <label for="Numbers">Numbers</label>
                <input type="checkbox" id="Symbols">
                <label for="Symbols">Symbols</label>
            </div>

            <div class="generate">
                <button onclick="createPassword()">Generate Password</button>
            </div>
        </div>
    </main>

    <!-- Footer -->
     <footer>

        <div class="footer-box">

            <div class="logo-footer" onclick="reloadPage()">
                <img src="images/FAV.png" alt="logo-footer">
                <h2 onclick="reloadPage()">RandomKeyMaker</h2>
                
            </div>

            <a href="https://github.com/aristotelisarnaoutakis" target="_blank" class="link-text">GitHub</a>  

        </div>
        <HR></HR>

        <div class="text-footer">
        <p>Â© 2025 Developed By Aristotelis Arnaoutakis.<br/>All rights reserved.</p>
        </div>

     </footer>
    
</body>

<script>
    const passwordBox = document.getElementById("password");
    const passwordLengthSlider = document.getElementById("password-length");
    const lengthDisplay = document.getElementById("length-display");

        // Checkbox elements
        const includeUppercase = document.getElementById("uppercase");
        const includeLowercase = document.getElementById("Lowercase");
        const includeNumbers = document.getElementById("Numbers");
        const includeSymbols = document.getElementById("Symbols");

        // Character sets
        const upperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const lowerCase = "abcdefghijklmnopqrstuvwxyz";
        const numbers = "0123456789";
        const symbols = "!@#$%^&*()_-+={[}]|\\:;<,>.?/";

        // Function to play a sound, ensuring it's preloaded and starts immediately
        function playSound(audioElement) {
            audioElement.pause(); // Stop any ongoing playback
            audioElement.currentTime = 0; // Reset playback position
            audioElement.play().catch((error) => {
                console.error("Audio playback failed:", error);
            });
        }

        // Preload audio files to ensure they are ready to play
        window.addEventListener("DOMContentLoaded", () => {
            const shakeSound = document.getElementById("shakeSound");
            const generateSound = document.getElementById("generateSound");

            // Preload audio by playing silently and pausing immediately
            [shakeSound, generateSound].forEach((audio) => {
                audio.play().catch(() => {
                    // Ignore the error if play fails without interaction
                });
                audio.pause();
                audio.currentTime = 0;
            });
        });

        // Update the length display when the slider changes
        passwordLengthSlider.addEventListener("input", () => {
            lengthDisplay.textContent = passwordLengthSlider.value;
        });

        // Generate password when the button is clicked
        function createPassword() {
            const shakeSound = document.getElementById("shakeSound");
            const generateSound = document.getElementById("generateSound");

            const length = parseInt(passwordLengthSlider.value, 10);
            let allChars = "";
            let password = "";

            // Add selected character sets
            if (includeUppercase.checked) allChars += upperCase;
            if (includeLowercase.checked) allChars += lowerCase;
            if (includeNumbers.checked) allChars += numbers;
            if (includeSymbols.checked) allChars += symbols;

            // Validation: Ensure at least one checkbox is selected
            if (allChars === "") {
                const optionsDiv = document.querySelector(".options");

                // Play the shake sound
                playSound(shakeSound);

                // Add the shake class
                optionsDiv.classList.add("shake");

                // Remove the shake class after the animation completes
                setTimeout(() => {
                    optionsDiv.classList.remove("shake");
                }, 500);

                return; // Exit the function if no checkboxes are checked
            }

            // Play the generate sound when a password is created
            playSound(generateSound);

            // Ensure at least one character from each selected set
            if (includeUppercase.checked) password += upperCase[Math.floor(Math.random() * upperCase.length)];
            if (includeLowercase.checked) password += lowerCase[Math.floor(Math.random() * lowerCase.length)];
            if (includeNumbers.checked) password += numbers[Math.floor(Math.random() * numbers.length)];
            if (includeSymbols.checked) password += symbols[Math.floor(Math.random() * symbols.length)];

            // Fill the rest of the password with random characters from allChars
            while (password.length < length) {
                password += allChars[Math.floor(Math.random() * allChars.length)];
            }

            // Shuffle the password to randomize the order of characters
            password = shuffle(password);

            // Update the password field
            passwordBox.value = password;
        }

        // Function to shuffle the password characters
        function shuffle(string) {
            return string.split('').sort(() => Math.random() - 0.5).join('');
        }

        // Copy password to clipboard
        function copyPassword() {
            passwordBox.select();
            document.execCommand("copy");

            // Play the copy sound
            const copySound = document.getElementById("copySound");
            playSound(copySound);
        }
    </script>

</html>